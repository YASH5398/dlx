import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useState } from 'react';
import { useReferral } from '../../hooks/useReferral';
export default function Referrals() {
    const { referralLink, referralCode, totalEarnings, level, activeReferrals, history, rate } = useReferral();
    const [copied, setCopied] = useState(false);
    const [shared, setShared] = useState(false);
    const copy = async () => {
        try {
            await navigator.clipboard.writeText(referralLink);
            setCopied(true);
            setTimeout(() => setCopied(false), 1500);
        }
        catch { }
    };
    const share = async () => {
        try {
            if (navigator.share) {
                await navigator.share({ title: 'Join DigiLinex', text: 'Sign up with my referral link', url: referralLink });
                setShared(true);
                setTimeout(() => setShared(false), 1500);
            }
            else {
                await copy();
            }
        }
        catch { }
    };
    return (_jsxs("div", { className: "space-y-6 p-4 sm:p-6 max-w-7xl mx-auto", children: [_jsx("div", { className: "bg-gradient-to-r from-gray-800 to-gray-900 rounded-2xl p-6 shadow-lg border border-gray-700/50", children: _jsx("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4", children: _jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-bold text-white tracking-tight", children: "Referrals" }), _jsxs("p", { className: "text-sm text-gray-400 mt-1", children: ["Earn ", _jsxs("span", { className: "font-semibold text-blue-400", children: [rate, "%"] }), " commissions from your referrals. Current Level: ", _jsx("span", { className: "font-semibold text-blue-400", children: level })] })] }) }) }), _jsxs("div", { className: "bg-gray-800/50 rounded-2xl p-6 shadow-lg border border-gray-700/50 backdrop-blur-sm", children: [_jsx("h3", { className: "text-lg font-semibold text-white mb-4", children: "Your Referral Link" }), _jsxs("div", { className: "flex flex-col sm:flex-row gap-4 items-center", children: [_jsxs("div", { className: "flex-1 bg-gray-900/50 rounded-xl p-4 border border-gray-600/50 w-full", children: [_jsxs("p", { className: "text-sm text-gray-400 mb-1", children: ["Referral Code: ", _jsx("span", { className: "font-mono text-blue-400", children: referralCode })] }), _jsx("p", { className: "font-mono text-sm text-white break-all", children: referralLink })] }), _jsxs("div", { className: "flex gap-3 w-full sm:w-auto", children: [_jsx("button", { onClick: copy, className: "flex-1 sm:flex-none px-4 py-2 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-medium transition-all duration-200 shadow-md hover:shadow-blue-500/20", children: copied ? 'Copied!' : 'Copy Link' }), _jsx("button", { onClick: share, className: "flex-1 sm:flex-none px-4 py-2 rounded-xl bg-gray-700/50 hover:bg-gray-600/50 border border-gray-600 text-white font-medium transition-all duration-200", children: shared ? 'Shared!' : 'Share' })] })] })] }), _jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4", children: [_jsx("div", { className: "bg-gray-800/50 rounded-2xl p-5 shadow-lg border border-gray-700/50 hover:shadow-xl transition-all duration-200", children: _jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { className: "h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center text-white text-xl", children: "\uD83D\uDC65" }), _jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-400", children: "Total Referrals" }), _jsx("p", { className: "text-2xl font-semibold text-white", children: activeReferrals })] })] }) }), _jsx("div", { className: "bg-gray-800/50 rounded-2xl p-5 shadow-lg border border-gray-700/50 hover:shadow-xl transition-all duration-200", children: _jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { className: "h-12 w-12 rounded-full bg-gradient-to-br from-green-500 to-teal-600 flex items-center justify-center text-white text-xl", children: "\uD83D\uDCB5" }), _jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-400", children: "Total Commission" }), _jsxs("p", { className: "text-2xl font-semibold text-white", children: ["$", totalEarnings.toFixed(2)] })] })] }) }), _jsx("div", { className: "bg-gray-800/50 rounded-2xl p-5 shadow-lg border border-gray-700/50 hover:shadow-xl transition-all duration-200", children: _jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { className: "h-12 w-12 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-xl", children: "\uD83C\uDFC6" }), _jsxs("div", { children: [_jsx("p", { className: "text-sm text-gray-400", children: "Current Level" }), _jsx("p", { className: "text-2xl font-semibold text-white", children: level })] })] }) })] }), _jsxs("div", { className: "bg-gray-800/50 rounded-2xl shadow-lg border border-gray-700/50 overflow-hidden", children: [_jsx("div", { className: "px-6 py-4 border-b border-gray-700/50", children: _jsx("h3", { className: "text-lg font-semibold text-white", children: "Referral History" }) }), _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "min-w-full text-sm", children: [_jsx("thead", { children: _jsxs("tr", { className: "text-left text-gray-400 border-b border-gray-700/50", children: [_jsx("th", { className: "px-6 py-3 font-medium", children: "Username" }), _jsx("th", { className: "px-6 py-3 font-medium", children: "Date" }), _jsx("th", { className: "px-6 py-3 font-medium", children: "Status" }), _jsx("th", { className: "px-6 py-3 font-medium text-right", children: "Commission Earned" })] }) }), _jsxs("tbody", { className: "divide-y divide-gray-700/50", children: [history.length === 0 && (_jsx("tr", { children: _jsx("td", { colSpan: 4, className: "px-6 py-8 text-center text-gray-500", children: "No referrals yet" }) })), history.map((row) => (_jsxs("tr", { className: "hover:bg-gray-700/50 transition-colors duration-150", children: [_jsx("td", { className: "px-6 py-4 text-white", children: row.username }), _jsx("td", { className: "px-6 py-4 text-gray-400", children: row.date ? new Date(row.date).toLocaleDateString() : 'â€”' }), _jsx("td", { className: "px-6 py-4", children: _jsx("span", { className: `inline-flex px-2 py-1 rounded-full text-xs font-medium ${row.status === 'active'
                                                            ? 'bg-green-500/10 text-green-400 border border-green-500/20'
                                                            : 'bg-gray-600/10 text-gray-300 border border-gray-600/20'}`, children: row.status === 'active' ? 'Active' : 'Joined' }) }), _jsxs("td", { className: "px-6 py-4 text-right text-white", children: ["$", row.commissionUsd.toFixed(2)] })] }, row.id)))] })] }) })] })] }));
}
